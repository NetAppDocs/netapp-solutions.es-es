---
sidebar: sidebar 
permalink: containers/rh-os-n_use_case_rosa_solution_snapshot_app.html 
keywords: OpenShift, OCP, Trident, NetApp ONTAP, Red Hat OpenShift Service on AWS, 
summary: Red Hat OpenShift Service en AWS con NetApp ONTAP 
---
= Red Hat OpenShift Service en AWS con NetApp ONTAP
:hardbreaks:
:allow-uri-read: 
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ../media/


[role="lead"]
**1. Crear una instantánea del volumen de la aplicación** En esta sección, mostraremos cómo crear una instantánea de Trident del volumen asociado a la aplicación. Esta será una copia de punto en el tiempo de los datos de la aplicación. Si se pierden los datos de la aplicación, podemos recuperar los datos de esta copia puntual. NOTA: Esta copia Snapshot se almacena en el mismo agregado que el volumen original en ONTAP (en las instalaciones o en el cloud). Por lo tanto, si se pierde el agregado de almacenamiento de ONTAP, no podemos recuperar los datos de la aplicación a partir de su instantánea.

**a.. Cree un VolumeSnapshotClass Guarde el siguiente manifiesto en un archivo denominado volume-snapshot-class.yaml

[source]
----
apiVersion: snapshot.storage.k8s.io/v1
kind: VolumeSnapshotClass
metadata:
 name: fsx-snapclass
driver: csi.trident.netapp.io
deletionPolicy: Delete
----
Cree una instantánea mediante el manifiesto anterior.

image:redhat_openshift_container_rosa_image20.png["clase de instantánea"]

**b.. A continuación, cree una instantánea** Cree una instantánea de la RVP existente mediante la creación de VolumeSnapshot para tomar una copia puntual de sus datos PostgreSQL. Esto crea una instantánea de FSX que casi no ocupa espacio en el backend del sistema de archivos. Guarde el siguiente manifiesto en un archivo llamado volume-snapshot.yaml:

[source]
----
apiVersion: snapshot.storage.k8s.io/v1
kind: VolumeSnapshot
metadata:
 name: postgresql-volume-snap-01
spec:
 volumeSnapshotClassName: fsx-snapclass
 source:
   persistentVolumeClaimName: data-postgresql-0
----
**c.. Cree la snapshot del volumen y confirme que se ha creado**

Eliminar la base de datos para simular la pérdida de datos (la pérdida de datos puede ocurrir debido a una variedad de razones, aquí solo estamos simulando borrando la base de datos)

image:redhat_openshift_container_rosa_image21.png["copia de snapshot de volumen"]

**d.. Eliminar la base de datos para simular la pérdida de datos (la pérdida de datos puede ocurrir debido a una variedad de razones, aquí solo estamos simulando borrando la base de datos)**

image:redhat_openshift_container_rosa_image22.png["conexión a base de datos"]

image:redhat_openshift_container_rosa_image23.png["borrar base de datos"]
